import{c as u,r as x,j as e,m as p,B as o,A as d}from"./index-c6f04137.js";import{I}from"./input-108b52f1.js";import{C as S,a as A,b as L,d as T}from"./card-4b24962a.js";import{C as E}from"./check-circle-f52ace4b.js";import{L as M}from"./lock-934c23dc.js";const D=u("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]),H=u("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),$=u("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),K=({onSuccess:f,onFailure:g,userName:y,correctPin:N})=>{const[l,m]=x.useState(""),[n,j]=x.useState(0),[t,w]=x.useState(!1),[i,v]=x.useState(!1),c=3,r=4,k=a=>{const s=a.target.value;/^\d*$/.test(s)&&s.length<=r&&(m(s),s.length===r&&h(s))},h=a=>{if(!(t||i)){if(a.length!==r){d({title:"Invalid PIN",description:`PIN must be ${r} digits.`,variant:"destructive"});return}a===N?(v(!0),d({title:"PIN Correct! ✅",description:"Logging you in..."}),setTimeout(f,1500)):(w(!0),j(s=>s+1),n+1>=c?(d({title:"Too Many Attempts",description:"Account locked. Please contact support.",variant:"destructive"}),setTimeout(g,1500)):(d({title:"Incorrect PIN",description:`Please try again. ${c-(n+1)} attempts remaining.`,variant:"destructive"}),setTimeout(()=>{m(""),w(!1)},1500)))}},b=a=>{if(t||i||l.length>=r)return;const s=l+a;m(s),s.length===r&&h(s)},C=()=>{t||i||m(a=>a.slice(0,-1))},P=a=>{a.preventDefault(),h(l)};return e.jsx("div",{className:"min-h-screen gradient-bg flex items-center justify-center p-4",children:e.jsx(p.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full max-w-xs sm:max-w-sm",children:e.jsxs(S,{className:"glass-effect border-white/20 p-6 sm:p-8 text-white",children:[e.jsxs(A,{className:"text-center",children:[e.jsx(p.div,{animate:{scale:t?[1,1.1,1]:1},transition:{repeat:t?2:0,duration:.3},children:i?e.jsx(E,{className:"h-16 w-16 sm:h-20 sm:w-20 mx-auto text-green-300"}):t&&n>=c?e.jsx(M,{className:"h-16 w-16 sm:h-20 sm:w-20 mx-auto text-red-400"}):t?e.jsx($,{className:"h-16 w-16 sm:h-20 sm:w-20 mx-auto text-red-300"}):e.jsx(H,{className:"h-16 w-16 sm:h-20 sm:w-20 mx-auto text-purple-300"})}),e.jsxs(L,{className:"text-xl sm:text-2xl mt-4 sm:mt-6",children:["Enter Your ",r,"-Digit PIN"]}),y&&e.jsxs("p",{className:"text-white/80 text-sm sm:text-base",children:["Welcome back, ",y,"!"]})]}),e.jsxs(T,{className:"text-center space-y-4 sm:space-y-6",children:[e.jsxs("form",{onSubmit:P,children:[e.jsx("div",{className:"flex justify-center space-x-2 sm:space-x-3 mb-4 sm:mb-6",children:Array.from({length:r}).map((a,s)=>e.jsx(p.div,{className:`w-10 h-12 sm:w-12 sm:h-14 rounded-lg border-2 flex items-center justify-center text-2xl sm:text-3xl font-bold
                      ${t?"border-red-400 bg-red-500/20":i?"border-green-400 bg-green-500/20":"border-white/30 bg-white/10"}
                      ${l.length>s?t?"text-red-300":i?"text-green-300":"text-purple-300":"text-white/50"}
                    `,animate:{scale:l.length===s&&!t&&!i?1.1:1},transition:{duration:.1},children:l[s]?"•":""},s))}),e.jsx(I,{type:"password",value:l,onChange:k,maxLength:r,className:"opacity-0 absolute w-0 h-0 pointer-events-none",autoFocus:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[["1","2","3","4","5","6","7","8","9"].map(a=>e.jsx(o,{variant:"outline",className:"text-xl sm:text-2xl py-3 sm:py-4 bg-white/10 border-white/20 text-white hover:bg-white/20 disabled:opacity-50",onClick:()=>b(a),disabled:t||i||l.length>=r,children:a},a)),e.jsx(o,{variant:"outline",className:"text-xl sm:text-2xl py-3 sm:py-4 bg-white/10 border-white/20 text-white hover:bg-white/20 disabled:opacity-50",onClick:()=>{},disabled:t||i}),e.jsx(o,{variant:"outline",className:"text-xl sm:text-2xl py-3 sm:py-4 bg-white/10 border-white/20 text-white hover:bg-white/20 disabled:opacity-50",onClick:()=>b("0"),disabled:t||i||l.length>=r,children:"0"}),e.jsx(o,{variant:"outline",className:"py-3 sm:py-4 bg-white/10 border-white/20 text-white hover:bg-white/20 disabled:opacity-50 flex items-center justify-center",onClick:C,disabled:t||i||l.length===0,children:e.jsx(D,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]}),i?e.jsx("p",{className:"text-sm sm:text-lg text-green-300 font-semibold",children:"PIN Correct! Logging in..."}):t&&n>=c?e.jsx("p",{className:"text-sm sm:text-lg text-red-400 font-semibold",children:"Account Locked. Contact support."}):t?e.jsx("p",{className:"text-sm sm:text-lg text-red-300 font-semibold",children:"Incorrect PIN. Try again."}):e.jsxs("p",{className:"text-xs sm:text-sm text-white/70",children:["Enter your ",r,"-digit security PIN."]}),e.jsxs("p",{className:"text-xs text-white/60",children:["Attempts remaining: ",Math.max(0,c-n)]}),e.jsx(o,{onClick:g,variant:"link",className:"w-full text-purple-300 hover:text-purple-200 disabled:opacity-50 text-sm",disabled:t||i,children:"Cancel Login"})]})]})})})};export{K as default};
